<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Minesweeper - Unblocked Games</title>
<style>
  body{margin:0;font-family:Arial;background:#071018;color:#fff;display:flex;flex-direction:column;min-height:100vh;align-items:center}
  header{padding:14px;text-align:center}
  main{padding:12px}
  .board{display:grid;grid-template-columns:repeat(8,44px);gap:6px;background:#091219;padding:12px;border-radius:10px}
  .cell{width:44px;height:44px;background:#172027;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;user-select:none}
  .controls{display:flex;gap:8px;justify-content:center;margin:10px 0}
  button,a.button{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#fff;padding:8px 10px;border-radius:8px;text-decoration:none}
  footer{padding:12px;text-align:center;color:#9aa3a9;width:100%}
</style>
</head>
<body>
<header><h1>ðŸ’£ Minesweeper (8x8)</h1></header>
<main>
  <div class="controls"><button id="new">New Game</button><a class="button" href="../index.html">Back to menu</a></div>
  <div id="board" class="board"></div>
</main>
<footer>Left click: reveal. Right click: flag.</footer>

<script>
(()=> {
  const size=8, minesCount=8;
  let board = [];
  const boardEl = document.getElementById('board');

  function init(){
    board = Array.from({length:size}, ()=>Array(size).fill(null));
    for(let r=0;r<size;r++) for(let c=0;c<size;c++) board[r][c] = {r,c,isMine:false,revealed:false,flag:false,adj:0};
    let placed=0;
    while(placed<minesCount){
      const r=Math.floor(Math.random()*size), c=Math.floor(Math.random()*size);
      if(!board[r][c].isMine){ board[r][c].isMine=true; placed++; }
    }
    for(let r=0;r<size;r++) for(let c=0;c<size;c++){
      let count=0;
      for(let dr=-1;dr<=1;dr++) for(let dc=-1;dc<=1;dc++){
        const rr=r+dr, cc=c+dc;
        if(rr>=0&&rr<size&&cc>=0&&cc<size && board[rr][cc].isMine) count++;
      }
      board[r][c].adj=count;
    }
    render();
  }

  function render(){
    boardEl.innerHTML='';
    for(let r=0;r<size;r++) for(let c=0;c<size;c++){
      const cell = board[r][c];
      const el = document.createElement('div'); el.className='cell';
      el.textContent = cell.revealed ? (cell.isMine ? 'ðŸ’£' : (cell.adj?cell.adj:'')) : (cell.flag? 'ðŸš©' : '');
      el.style.background = cell.revealed ? '#e9e9e9' : '#172027';
      el.style.color = cell.revealed ? '#000' : '#fff';
      el.addEventListener('click', ()=>{ reveal(r,c); render(); });
      el.addEventListener('contextmenu', e=>{ e.preventDefault(); cell.flag = !cell.flag; render(); });
      boardEl.appendChild(el);
    }
  }

  function reveal(r,c){
    const cell = board[r][c];
    if(cell.flag || cell.revealed) return;
    cell.revealed = true;
    if(cell.isMine){ for(let rr=0;rr<size;rr++) for(let cc=0;cc<size;cc++) board[rr][cc].revealed=true; return; }
    if(cell.adj===0){
      for(let dr=-1;dr<=1;dr++) for(let dc=-1;dc<=1;dc++){
        const rr=r+dr, cc=c+dc;
        if(rr>=0&&rr<size&&cc>=0&&cc<size && !board[rr][cc].revealed) reveal(rr,cc);
      }
    }
  }

  document.getElementById('new').addEventListener('click', init);
  init();
})();
</script>
</body>
</html>
