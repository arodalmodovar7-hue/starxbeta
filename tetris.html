<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Tetris - Unblocked Games</title>
<style>
  body{margin:0;font-family:Arial;background:#071018;color:#fff;display:flex;flex-direction:column;min-height:100vh}
  header{padding:14px;text-align:center}
  main{flex:1;display:flex;flex-direction:column;align-items:center;gap:10px;padding:12px}
  canvas{background:#061018;border-radius:8px;max-width:100%;height:auto}
  .controls{display:flex;gap:8px}
  button,a.button{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#fff;padding:8px 10px;border-radius:8px;text-decoration:none}
  footer{padding:12px;text-align:center;color:#9aa3a9}
</style>
</head>
<body>
<header><h1>ðŸ”· Tetris (simple)</h1></header>
<main>
  <div class="controls">Arrows to move/rotate</div>
  <canvas id="c" width="300" height="600"></canvas>
  <div class="controls">
    <button id="restart">Restart</button>
    <a class="button" href="../index.html">Back to menu</a>
  </div>
</main>
<footer>Basic Tetris, pieces and lines.</footer>

<script>
(()=> {
  const canvas = document.getElementById('c'), ctx = canvas.getContext('2d');
  const COLS = 10, ROWS = 20, BLOCK=30;
  canvas.width = COLS*BLOCK; canvas.height = ROWS*BLOCK;
  const colors = ['#000','#00f','#f90','#0f0','#ff2','#9f2','#a0f','#f09'];

  function makeMatrix(w,h){ const m=[]; while(h--) m.push(new Array(w).fill(0)); return m; }
  let arena = makeMatrix(COLS, ROWS);
  const pieces = {
    I:[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],
    J:[[1,0,0],[1,1,1],[0,0,0]],
    L:[[0,0,1],[1,1,1],[0,0,0]],
    O:[[1,1],[1,1]],
    S:[[0,1,1],[1,1,0],[0,0,0]],
    T:[[0,1,0],[1,1,1],[0,0,0]],
    Z:[[1,1,0],[0,1,1],[0,0,0]]
  };
  function randPiece(){ const keys=Object.keys(pieces); const k = keys[Math.floor(Math.random()*keys.length)]; return pieces[k]; }

  let player = {pos:{x:4,y:0}, matrix: randPiece()};
  let dropCounter=0, dropInterval=700, lastTime=0, raf;

  function collide(ar,pl){
    const m=pl.matrix,p=pl.pos;
    for(let y=0;y<m.length;y++) for(let x=0;x<m[y].length;x++) if(m[y][x]){
      if(!ar[y+p.y] || ar[y+p.y][x+p.x]) return true;
    }
    return false;
  }

  function merge(ar,pl){
    const m=pl.matrix,p=pl.pos;
    for(let y=0;y<m.length;y++) for(let x=0;x<m[y].length;x++) if(m[y][x]) ar[y+p.y][x+p.x] = 1;
  }

  function rotate(matrix){
    const N = matrix.length; const res = makeMatrix(N,N);
    for(let y=0;y<N;y++) for(let x=0;x<N;x++) res[x][N-1-y] = matrix[y][x];
    return res;
  }

  function playerDrop(){
    player.pos.y++;
    if(collide(arena,player)){ player.pos.y--; merge(arena,player); sweep(); playerReset(); }
    dropCounter=0;
  }

  function sweep(){
    outer: for(let y=arena.length-1;y>=0;y--){
      for(let x=0;x<arena[y].length;x++) if(!arena[y][x]) continue outer;
      arena.splice(y,1); arena.unshift(new Array(COLS).fill(0)); y++;
    }
  }

  function playerReset(){
    player.matrix = randPiece(); player.pos.y=0; player.pos.x = Math.floor(COLS/2) - Math.floor(player.matrix[0].length/2);
    if(collide(arena,player)){ arena = makeMatrix(COLS,ROWS); }
  }

  function draw(){
    ctx.fillStyle='#061018'; ctx.fillRect(0,0,canvas.width,canvas.height);
    // arena
    for(let y=0;y<ROWS;y++) for(let x=0;x<COLS;x++) if(arena[y][x]){ ctx.fillStyle = '#888'; ctx.fillRect(x*BLOCK,y*BLOCK,BLOCK-1,BLOCK-1); }
    // player
    const m=player.matrix;
    for(let y=0;y<m.length;y++) for(let x=0;x<m[y].length;x++) if(m[y][x]){ ctx.fillStyle='#f39c12'; ctx.fillRect((player.pos.x+x)*BLOCK,(player.pos.y+y)*BLOCK,BLOCK-1,BLOCK-1); }
  }

  function update(time=0){
    const delta = time - lastTime; lastTime = time; dropCounter += delta;
    if(dropCounter > dropInterval) playerDrop();
    draw(); raf=requestAnimationFrame(update);
  }

  document.addEventListener('keydown', e=>{
    if(e.key==='ArrowLeft'){ player.pos.x--; if(collide(arena,player)) player.pos.x++; }
    if(e.key==='ArrowRight'){ player.pos.x++; if(collide(arena,player)) player.pos.x--; }
    if(e.key==='ArrowDown'){ playerDrop(); }
    if(e.key==='ArrowUp'){ player.matrix = rotate(player.matrix); if(collide(arena,player)) player.matrix = rotate(rotate(rotate(player.matrix))); }
  });
  document.getElementById('restart').addEventListener('click', ()=>{ arena = makeMatrix(COLS,ROWS); playerReset(); });
  playerReset(); update();
})();
</script>
</body>
</html>
